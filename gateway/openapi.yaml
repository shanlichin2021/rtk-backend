swagger: "2.0"

info:
  title: Right‑To‑Know API
  version: "1.0.0"

paths:
  /api/chat:
    # CORS preflight — forwarded to Cloud Run
    options:
      operationId: chatPreflight
      summary: "CORS preflight for /api/chat"
      x-google-allow: all
      x-google-backend:
        address: https://rtk-backend-1054015385247.us-central1.run.app/api/chat
        protocol: h2
      responses:
        "204":
          description: "No Content"
          headers:
            Access-Control-Allow-Origin:
              type: string
              default: "*"
            Access-Control-Allow-Methods:
              type: string
              default: "POST,OPTIONS"
            Access-Control-Allow-Headers:
              type: string
              default: "Content-Type,Authorization"

    # Actual chat endpoint — forwarded to Cloud Run
    post:
      operationId: chat
      summary: "Chat endpoint"
      x-google-allow: all
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: payload
          schema:
            type: object
      responses:
        "200":
          description: "OK"

# Proxy all other calls to your Cloud Run service
x-google-backend:
  address: https://rtk-backend-1054015385247.us-central1.run.app
  protocol: h2
